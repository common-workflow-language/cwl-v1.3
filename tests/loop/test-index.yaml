- job: single-var-loop-job.yml
  tool: single-var-loop.cwl
  id: loop_single_variable
  doc: "Test a simple loop case with a single variable"
  output:
    o1: 10
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: single-var-loop-job.yml
  tool: single-var-loop-no-iteration.cwl
  id: loop_single_variable_no_iteration
  doc: "Test a simple loop case with a single variable and a false condition"
  output:
    o1: null
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: two-vars-loop-job.yml
  tool: two-vars-loop.cwl
  id: loop_two_variables
  doc: "Test a loop case with two variables, which are both back-propagated between iterations"
  output:
    o1: 10
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: two-vars-loop-job.yml
  tool: two-vars-loop-2.cwl
  id: loop_two_variables_single_backpropagation
  doc: "Test a loop case with two variables, but when only one of them is back-propagated between iterations"
  output:
    o1: 10
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: single-var-loop-job.yml
  tool: all-output-loop.cwl
  id: loop_with_all_output_method
  doc: "Test a loop case with outputMethod set to all_iterations"
  output:
    o1: [2, 3, 4, 5, 6, 7, 8, 9, 10]
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: single-var-loop-job.yml
  tool: all-output-loop-no-iteration.cwl
  id: loop_with_all_output_method_no_iteration
  doc: "Test a loop case with outputMethod set to all_iterations and a false condition"
  output:
    o1: []
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: two-vars-loop-job.yml
  tool: value-from-loop.cwl
  id: loop_value_from
  doc: "Test a loop case with a variable generated by a valueFrom directive"
  output:
    o1: 10
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: two-vars-loop-job.yml
  tool: invalid-value-from-loop-no-requirement.cwl
  id: loop_value_from_fail_no_requirement
  doc: "Test that a workflow loop fails if a valueFrom directive is specified without StepInputExpressionRequirement"
  should_fail: true
  tags: [ conditional, loop, inline_javascript, workflow ]

- job: loop-inside-scatter-job.yml
  tool: loop-inside-scatter.cwl
  id: loop_inside_scatter
  doc: "Test a loop subworkflow inside a scatter step"
  output:
    o1: [10, 10, 10, 10, 10]
  tags: [ conditional, loop, inline_javascript, scatter, workflow ]

- job: two-vars-loop-job.yml
  tool: loop-inside-loop.cwl
  id: loop_nested
  doc: "Test a workflow with two nested loops"
  output:
    o1: [2, 3, 4]
  tags: [ conditional, loop, inline_javascript, scatter, workflow ]

- job: two-vars-loop-job.yml
  tool: loop-inside-loop-all.cwl
  id: loop_nested_all
  doc: "Test a workflow with two nested loops, both with outputMethod set to all_iterations"
  output:
    o1: [[2], [2, 3], [2, 3, 4]]
  tags: [ conditional, loop, inline_javascript, scatter, workflow ]

- job: single-var-loop-job.yml
  tool: multi-source-loop.cwl
  id: loop_multi_source_input
  doc: "Test a loop with two sources, which are selected through a pickValue directive"
  output:
    o1: [2, 3, 4, 5, 8, 11, 14, 17, 20]
  tags: [ conditional, loop, inline_javascript, multiple_input, scatter, workflow ]

- job: single-var-loop-job.yml
  tool: invalid-multi-source-loop-no-requirement.cwl
  id: loop_multi_source_input_fail_no_requirement
  doc: "Test that a loop with two sources fails without MultipleInputFeatureRequirement"
  should_fail: true
  tags: [ conditional, loop, inline_javascript, multiple_input, scatter, workflow ]

- job: single-var-loop-job.yml
  tool: default-value-loop.cwl
  id: loop_defaultvalue
  output:
    o1: [8, 11, 14, 17, 20]
  doc: "Test a loop whose source has a default value"
  tags: [ conditional, loop, inline_javascript, scatter, workflow ]

- job: single-var-loop-job.yml
  tool: default-stepinput-loop.cwl
  id: loop_default_stepinput
  output:
    o1: [8, 13, 18]
  doc: "Test a loop whose source has a default value updated by a valueFrom directive"
  tags: [ conditional, loop, inline_javascript, scatter, workflow ]

- job: single-var-loop-job.yml
  tool: opt-var-loop.cwl
  id: loop_opt_var
  output:
    o1: 10
  doc: "Test a loop case with two variables but one is optional"
  tags: [ loop, inline_javascript, workflow ]

- tool: value-from-loop-2.cwl
  id: loop_value_from-2
  output: {
    "result": [
        "first,0-sha1$e445e7ebf0b1e19e5eb7f3e8e4d86f5424c4b103",
        "first,1-sha1$c2ee1cb0abf988529ae1d67c5a6798a9db9e133a",
        "first,2-sha1$7663c0076cdf1dbe14373237e8c2eea8735b04f2",
        "first,3-sha1$83b77de68c3c6cce92a381adc9159d6e59332545",
        "first,4-sha1$eb74efd51e4399144f465534f4077f515d996d57"
    ]
  }
  doc: "Test a loop case with a literal file generated by a valueFrom directive inside the loop."
  tags: [ conditional, loop, inline_javascript, workflow ]

- tool: value-from-loop-3.cwl
  id: loop_and_value_from
  output: {
    "result": [
      "first,0-sha1$e445e7ebf0b1e19e5eb7f3e8e4d86f5424c4b103",
      "first,0-sha1$e445e7ebf0b1e19e5eb7f3e8e4d86f5424c4b103",
      "first,0-sha1$e445e7ebf0b1e19e5eb7f3e8e4d86f5424c4b103",
      "first,0-sha1$e445e7ebf0b1e19e5eb7f3e8e4d86f5424c4b103",
      "first,0-sha1$e445e7ebf0b1e19e5eb7f3e8e4d86f5424c4b103"
    ]
  }
  doc: "Test a loop case with a literal file generated by a valueFrom directive outside the loop."
  tags: [ conditional, loop, inline_javascript, workflow ]